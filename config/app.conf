# s-hy2 应用配置文件
# 所有脚本共享的配置参数

# 项目信息
PROJECT_NAME="s-hy2"
PROJECT_VERSION="1.1.0"
PROJECT_REPO_URL="https://github.com/sindricn/s-hy2"
PROJECT_RAW_URL="https://raw.githubusercontent.com/sindricn/s-hy2/main"

# 默认端口和网络设置
DEFAULT_LISTEN_PORT=443
MAX_PORT_RANGE=65535
MIN_PORT_RANGE=1

# 并发和性能设置
MAX_CONCURRENT_JOBS=8
DEFAULT_DOWNLOAD_TIMEOUT=30
MAX_FILE_SIZE=10485760  # 10MB

# 目录路径
HYSTERIA_CONFIG_DIR="/etc/hysteria"
HYSTERIA_LOG_DIR="/var/log/hysteria"
BACKUP_DIR="/var/backups/s-hy2"

# 文件路径
CONFIG_FILE="$HYSTERIA_CONFIG_DIR/config.yaml"
SERVER_DOMAIN_FILE="$HYSTERIA_CONFIG_DIR/server-domain.conf"
HYSTERIA_LOG_FILE="$HYSTERIA_LOG_DIR/hysteria.log"

# 缓存设置
CACHE_EXPIRY=3600  # 1小时
DOMAIN_CACHE_FILE="/tmp/s-hy2-domain-cache"
IP_CACHE_FILE="/tmp/s-hy2-ip-cache"

# 安全设置
ENABLE_SECURE_MODE=true
ENABLE_INPUT_VALIDATION=true
ENABLE_DOWNLOAD_VERIFICATION=true
MAX_INPUT_LENGTH=1024

# 日志设置
LOG_LEVEL=1  # 0=DEBUG, 1=INFO, 2=WARN, 3=ERROR, 4=FATAL
ENABLE_FILE_LOGGING=true
LOG_ROTATION_SIZE=10485760  # 10MB
LOG_RETENTION_DAYS=7

# 伪装域名列表 (用于测试)
MASQUERADE_DOMAINS=(
    "www.cloudflare.com"
    "www.apple.com"
    "www.microsoft.com"
    "www.amazon.com"
    "www.google.com"
    "www.github.com"
    "www.stackoverflow.com"
    "www.wikipedia.org"
    "www.reddit.com"
    "www.twitter.com"
)

# Hysteria2 安装设置
HYSTERIA_INSTALL_URL="https://get.hy2.sh/"
HYSTERIA_BINARY_PATH="/usr/local/bin/hysteria"
HYSTERIA_SERVICE_NAME="hysteria-server"
HYSTERIA_USER="hysteria"

# 证书设置
CERT_DIR="$HYSTERIA_CONFIG_DIR/certs"
ACME_EMAIL_REGEX="^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$"
CERT_RENEWAL_DAYS=30

# 网络测试设置
NETWORK_TEST_TIMEOUT=5
NETWORK_TEST_RETRIES=3
PING_TIMEOUT=5

# 系统兼容性
SUPPORTED_OS=("ubuntu" "debian" "centos" "rhel" "fedora")
MIN_UBUNTU_VERSION="18.04"
MIN_DEBIAN_VERSION="9"
MIN_CENTOS_VERSION="7"
MIN_FEDORA_VERSION="30"

# 必需命令
REQUIRED_COMMANDS=("curl" "systemctl" "openssl" "grep" "awk" "sed")
OPTIONAL_COMMANDS=("jq" "bc" "ss" "netstat")

# 用户界面设置
MENU_TIMEOUT=300  # 5分钟无操作自动退出
PROGRESS_BAR_WIDTH=50
ENABLE_COLORS=true

# 临时文件设置
TEMP_DIR_PREFIX="/tmp/s-hy2"
TEMP_FILE_PERMISSIONS=600
TEMP_DIR_PERMISSIONS=700

# 备份设置
ENABLE_AUTO_BACKUP=true
BACKUP_RETENTION_DAYS=30
BACKUP_COMPRESSION=true